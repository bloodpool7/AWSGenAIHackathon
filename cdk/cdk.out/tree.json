{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.219.0"},"children":{"MCP-VPC":{"id":"MCP-VPC","path":"MCP-VPC","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.219.0"},"children":{"MCP-VPC":{"id":"MCP-VPC","path":"MCP-VPC/MCP-VPC","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.Vpc","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MCP-VPC/MCP-VPC/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPC","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPC","aws:cdk:cloudformation:props":{"cidrBlock":"10.0.0.0/16","enableDnsHostnames":true,"enableDnsSupport":true,"instanceTenancy":"default","tags":[{"key":"Name","value":"MCP-VPC/MCP-VPC"},{"key":"Project","value":"MCP-Servers-On-AWS"}]}}},"publicSubnet1":{"id":"publicSubnet1","path":"MCP-VPC/MCP-VPC/publicSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.219.0","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"MCP-VPC/MCP-VPC/publicSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-east-1a","cidrBlock":"10.0.0.0/24","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"MCP-VPC/MCP-VPC/publicSubnet1"},{"key":"Project","value":"MCP-Servers-On-AWS"}],"vpcId":{"Ref":"MCPVPC68ADF9D1"}}}},"Acl":{"id":"Acl","path":"MCP-VPC/MCP-VPC/publicSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"MCP-VPC/MCP-VPC/publicSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"MCP-VPC/MCP-VPC/publicSubnet1"},{"key":"Project","value":"MCP-Servers-On-AWS"}],"vpcId":{"Ref":"MCPVPC68ADF9D1"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"MCP-VPC/MCP-VPC/publicSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"MCPVPCpublicSubnet1RouteTable2AFD7854"},"subnetId":{"Ref":"MCPVPCpublicSubnet1SubnetAEE1BC0E"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"MCP-VPC/MCP-VPC/publicSubnet1/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"MCPVPCIGWEE21D79C"},"routeTableId":{"Ref":"MCPVPCpublicSubnet1RouteTable2AFD7854"}}}},"EIP":{"id":"EIP","path":"MCP-VPC/MCP-VPC/publicSubnet1/EIP","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnEIP","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::EIP","aws:cdk:cloudformation:props":{"domain":"vpc","tags":[{"key":"Name","value":"MCP-VPC/MCP-VPC/publicSubnet1"},{"key":"Project","value":"MCP-Servers-On-AWS"}]}}},"NATGateway":{"id":"NATGateway","path":"MCP-VPC/MCP-VPC/publicSubnet1/NATGateway","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnNatGateway","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::NatGateway","aws:cdk:cloudformation:props":{"allocationId":{"Fn::GetAtt":["MCPVPCpublicSubnet1EIPC76C6EDA","AllocationId"]},"subnetId":{"Ref":"MCPVPCpublicSubnet1SubnetAEE1BC0E"},"tags":[{"key":"Name","value":"MCP-VPC/MCP-VPC/publicSubnet1"},{"key":"Project","value":"MCP-Servers-On-AWS"}]}}}}},"publicSubnet2":{"id":"publicSubnet2","path":"MCP-VPC/MCP-VPC/publicSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.219.0","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"MCP-VPC/MCP-VPC/publicSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-east-1b","cidrBlock":"10.0.1.0/24","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"MCP-VPC/MCP-VPC/publicSubnet2"},{"key":"Project","value":"MCP-Servers-On-AWS"}],"vpcId":{"Ref":"MCPVPC68ADF9D1"}}}},"Acl":{"id":"Acl","path":"MCP-VPC/MCP-VPC/publicSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"MCP-VPC/MCP-VPC/publicSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"MCP-VPC/MCP-VPC/publicSubnet2"},{"key":"Project","value":"MCP-Servers-On-AWS"}],"vpcId":{"Ref":"MCPVPC68ADF9D1"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"MCP-VPC/MCP-VPC/publicSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"MCPVPCpublicSubnet2RouteTable7C1C4A3A"},"subnetId":{"Ref":"MCPVPCpublicSubnet2Subnet6731BC96"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"MCP-VPC/MCP-VPC/publicSubnet2/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"MCPVPCIGWEE21D79C"},"routeTableId":{"Ref":"MCPVPCpublicSubnet2RouteTable7C1C4A3A"}}}}}},"privateSubnet1":{"id":"privateSubnet1","path":"MCP-VPC/MCP-VPC/privateSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.219.0","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"MCP-VPC/MCP-VPC/privateSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-east-1a","cidrBlock":"10.0.2.0/24","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"MCP-VPC/MCP-VPC/privateSubnet1"},{"key":"Project","value":"MCP-Servers-On-AWS"}],"vpcId":{"Ref":"MCPVPC68ADF9D1"}}}},"Acl":{"id":"Acl","path":"MCP-VPC/MCP-VPC/privateSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"MCP-VPC/MCP-VPC/privateSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"MCP-VPC/MCP-VPC/privateSubnet1"},{"key":"Project","value":"MCP-Servers-On-AWS"}],"vpcId":{"Ref":"MCPVPC68ADF9D1"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"MCP-VPC/MCP-VPC/privateSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"MCPVPCprivateSubnet1RouteTable18384F47"},"subnetId":{"Ref":"MCPVPCprivateSubnet1Subnet9FF5B958"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"MCP-VPC/MCP-VPC/privateSubnet1/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"MCPVPCpublicSubnet1NATGateway552DB97D"},"routeTableId":{"Ref":"MCPVPCprivateSubnet1RouteTable18384F47"}}}}}},"privateSubnet2":{"id":"privateSubnet2","path":"MCP-VPC/MCP-VPC/privateSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.219.0","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"MCP-VPC/MCP-VPC/privateSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-east-1b","cidrBlock":"10.0.3.0/24","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"MCP-VPC/MCP-VPC/privateSubnet2"},{"key":"Project","value":"MCP-Servers-On-AWS"}],"vpcId":{"Ref":"MCPVPC68ADF9D1"}}}},"Acl":{"id":"Acl","path":"MCP-VPC/MCP-VPC/privateSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"MCP-VPC/MCP-VPC/privateSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"MCP-VPC/MCP-VPC/privateSubnet2"},{"key":"Project","value":"MCP-Servers-On-AWS"}],"vpcId":{"Ref":"MCPVPC68ADF9D1"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"MCP-VPC/MCP-VPC/privateSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"MCPVPCprivateSubnet2RouteTable1CF7FAAD"},"subnetId":{"Ref":"MCPVPCprivateSubnet2Subnet5E0860C9"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"MCP-VPC/MCP-VPC/privateSubnet2/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"MCPVPCpublicSubnet1NATGateway552DB97D"},"routeTableId":{"Ref":"MCPVPCprivateSubnet2RouteTable1CF7FAAD"}}}}}},"IGW":{"id":"IGW","path":"MCP-VPC/MCP-VPC/IGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnInternetGateway","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::InternetGateway","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"MCP-VPC/MCP-VPC"},{"key":"Project","value":"MCP-Servers-On-AWS"}]}}},"VPCGW":{"id":"VPCGW","path":"MCP-VPC/MCP-VPC/VPCGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCGatewayAttachment","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCGatewayAttachment","aws:cdk:cloudformation:props":{"internetGatewayId":{"Ref":"MCPVPCIGWEE21D79C"},"vpcId":{"Ref":"MCPVPC68ADF9D1"}}}},"RestrictDefaultSecurityGroupCustomResource":{"id":"RestrictDefaultSecurityGroupCustomResource","path":"MCP-VPC/MCP-VPC/RestrictDefaultSecurityGroupCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.219.0","metadata":[]},"children":{"Default":{"id":"Default","path":"MCP-VPC/MCP-VPC/RestrictDefaultSecurityGroupCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"VpcFlowLog":{"id":"VpcFlowLog","path":"MCP-VPC/MCP-VPC/VpcFlowLog","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.FlowLog","version":"2.219.0","metadata":[]},"children":{"IAMRole":{"id":"IAMRole","path":"MCP-VPC/MCP-VPC/VpcFlowLog/IAMRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportIAMRole":{"id":"ImportIAMRole","path":"MCP-VPC/MCP-VPC/VpcFlowLog/IAMRole/ImportIAMRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"MCP-VPC/MCP-VPC/VpcFlowLog/IAMRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"vpc-flow-logs.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"Name","value":"MCP-VPC/MCP-VPC/VpcFlowLog"},{"key":"Project","value":"MCP-Servers-On-AWS"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MCP-VPC/MCP-VPC/VpcFlowLog/IAMRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MCP-VPC/MCP-VPC/VpcFlowLog/IAMRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogStream","logs:DescribeLogStreams","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["MCPVPCVpcFlowLogLogGroupA0C9DF2F","Arn"]}},{"Action":"iam:PassRole","Effect":"Allow","Resource":{"Fn::GetAtt":["MCPVPCVpcFlowLogIAMRoleBE3D589A","Arn"]}}],"Version":"2012-10-17"},"policyName":"MCPVPCVpcFlowLogIAMRoleDefaultPolicyD032C948","roles":[{"Ref":"MCPVPCVpcFlowLogIAMRoleBE3D589A"}]}}}}}}},"LogGroup":{"id":"LogGroup","path":"MCP-VPC/MCP-VPC/VpcFlowLog/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MCP-VPC/MCP-VPC/VpcFlowLog/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"retentionInDays":731,"tags":[{"key":"Name","value":"MCP-VPC/MCP-VPC/VpcFlowLog"},{"key":"Project","value":"MCP-Servers-On-AWS"}]}}}}},"FlowLog":{"id":"FlowLog","path":"MCP-VPC/MCP-VPC/VpcFlowLog/FlowLog","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnFlowLog","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::FlowLog","aws:cdk:cloudformation:props":{"deliverLogsPermissionArn":{"Fn::GetAtt":["MCPVPCVpcFlowLogIAMRoleBE3D589A","Arn"]},"logDestinationType":"cloud-watch-logs","logGroupName":{"Ref":"MCPVPCVpcFlowLogLogGroupA0C9DF2F"},"resourceId":{"Ref":"MCPVPC68ADF9D1"},"resourceType":"VPC","tags":[{"key":"Name","value":"MCP-VPC/MCP-VPC/VpcFlowLog"},{"key":"Project","value":"MCP-Servers-On-AWS"}],"trafficType":"ALL"}}}}}}},"Custom::VpcRestrictDefaultSGCustomResourceProvider":{"id":"Custom::VpcRestrictDefaultSGCustomResourceProvider","path":"MCP-VPC/Custom::VpcRestrictDefaultSGCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.219.0"},"children":{"Staging":{"id":"Staging","path":"MCP-VPC/Custom::VpcRestrictDefaultSGCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"Role":{"id":"Role","path":"MCP-VPC/Custom::VpcRestrictDefaultSGCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}},"Handler":{"id":"Handler","path":"MCP-VPC/Custom::VpcRestrictDefaultSGCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"VpcId":{"id":"VpcId","path":"MCP-VPC/VpcId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"MCP-VPC/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"MCP-VPC/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"Exports":{"id":"Exports","path":"MCP-VPC/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Output{\"Ref\":\"MCPVPC68ADF9D1\"}":{"id":"Output{\"Ref\":\"MCPVPC68ADF9D1\"}","path":"MCP-VPC/Exports/Output{\"Ref\":\"MCPVPC68ADF9D1\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"Output{\"Ref\":\"MCPVPCpublicSubnet1SubnetAEE1BC0E\"}":{"id":"Output{\"Ref\":\"MCPVPCpublicSubnet1SubnetAEE1BC0E\"}","path":"MCP-VPC/Exports/Output{\"Ref\":\"MCPVPCpublicSubnet1SubnetAEE1BC0E\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"Output{\"Ref\":\"MCPVPCpublicSubnet2Subnet6731BC96\"}":{"id":"Output{\"Ref\":\"MCPVPCpublicSubnet2Subnet6731BC96\"}","path":"MCP-VPC/Exports/Output{\"Ref\":\"MCPVPCpublicSubnet2Subnet6731BC96\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"Output{\"Ref\":\"MCPVPCprivateSubnet1Subnet9FF5B958\"}":{"id":"Output{\"Ref\":\"MCPVPCprivateSubnet1Subnet9FF5B958\"}","path":"MCP-VPC/Exports/Output{\"Ref\":\"MCPVPCprivateSubnet1Subnet9FF5B958\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"Output{\"Ref\":\"MCPVPCprivateSubnet2Subnet5E0860C9\"}":{"id":"Output{\"Ref\":\"MCPVPCprivateSubnet2Subnet5E0860C9\"}","path":"MCP-VPC/Exports/Output{\"Ref\":\"MCPVPCprivateSubnet2Subnet5E0860C9\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"MCP-VPC/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.219.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"MCP-VPC/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.219.0"}}}},"MCP-Security":{"id":"MCP-Security","path":"MCP-Security","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.219.0"},"children":{"MCPServerUserPool":{"id":"MCPServerUserPool","path":"MCP-Security/MCPServerUserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MCP-Security/MCPServerUserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_phone_number","priority":1},{"name":"verified_email","priority":2}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":false},"aliasAttributes":["email"],"autoVerifiedAttributes":["email"],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","enabledMfas":["SOFTWARE_TOKEN_MFA"],"mfaConfiguration":"ON","policies":{"passwordPolicy":{"minimumLength":12,"requireLowercase":true,"requireUppercase":true,"requireNumbers":true,"requireSymbols":true}},"smsVerificationMessage":"The verification code to your new account is {####}","userPoolTags":{"Project":"MCP-Servers-On-AWS"},"userPoolAddOns":{"advancedSecurityMode":"ENFORCED"},"userPoolName":"mcp-server-user-pool","userPoolTier":"PLUS","verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}}},"CognitoDomain":{"id":"CognitoDomain","path":"MCP-Security/MCPServerUserPool/CognitoDomain","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolDomain","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MCP-Security/MCPServerUserPool/CognitoDomain/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolDomain","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolDomain","aws:cdk:cloudformation:props":{"domain":"mcp-server-rrhcc9xd","userPoolId":{"Ref":"MCPServerUserPool93568800"}}}}}},"MCPResourceServer":{"id":"MCPResourceServer","path":"MCP-Security/MCPServerUserPool/MCPResourceServer","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolResourceServer","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MCP-Security/MCPServerUserPool/MCPResourceServer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolResourceServer","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolResourceServer","aws:cdk:cloudformation:props":{"identifier":"mcp-server","name":"mcp-server","scopes":[{"scopeName":"read","scopeDescription":"Read access to MCP Server"},{"scopeName":"write","scopeDescription":"Write access to MCP Server"}],"userPoolId":{"Ref":"MCPServerUserPool93568800"}}}}}},"mcp-user-client":{"id":"mcp-user-client","path":"MCP-Security/MCPServerUserPool/mcp-user-client","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MCP-Security/MCPServerUserPool/mcp-user-client/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"accessTokenValidity":60,"allowedOAuthFlows":["implicit","code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["email","openid","profile",{"Fn::Join":["",[{"Ref":"MCPServerUserPoolMCPResourceServer2A905AE3"},"/read"]]},{"Fn::Join":["",[{"Ref":"MCPServerUserPoolMCPResourceServer2A905AE3"},"/write"]]}],"callbackUrLs":["http://localhost:2299/callback"],"clientName":"mcp-user-client","explicitAuthFlows":["ALLOW_USER_PASSWORD_AUTH","ALLOW_ADMIN_USER_PASSWORD_AUTH","ALLOW_USER_SRP_AUTH","ALLOW_REFRESH_TOKEN_AUTH"],"generateSecret":true,"idTokenValidity":60,"preventUserExistenceErrors":"ENABLED","refreshTokenValidity":43200,"supportedIdentityProviders":["COGNITO"],"tokenValidityUnits":{"idToken":"minutes","accessToken":"minutes","refreshToken":"minutes"},"userPoolId":{"Ref":"MCPServerUserPool93568800"}}}}}}}},"MCPServerWAF":{"id":"MCPServerWAF","path":"MCP-Security/MCPServerWAF","constructInfo":{"fqn":"aws-cdk-lib.aws_wafv2.CfnWebACL","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::WAFv2::WebACL","aws:cdk:cloudformation:props":{"defaultAction":{"allow":{}},"name":"mcp-server-waf","rules":[{"name":"AWS-AWSManagedRulesCommonRuleSet","priority":10,"statement":{"managedRuleGroupStatement":{"name":"AWSManagedRulesCommonRuleSet","vendorName":"AWS"}},"overrideAction":{"none":{}},"visibilityConfig":{"cloudWatchMetricsEnabled":true,"metricName":"AWS-AWSManagedRulesCommonRuleSet","sampledRequestsEnabled":true}},{"name":"RateLimitRule","priority":20,"statement":{"rateBasedStatement":{"limit":1000,"aggregateKeyType":"IP"}},"action":{"block":{}},"visibilityConfig":{"cloudWatchMetricsEnabled":true,"metricName":"RateLimitRule","sampledRequestsEnabled":true}}],"scope":"REGIONAL","tags":[{"key":"Project","value":"MCP-Servers-On-AWS"}],"visibilityConfig":{"cloudWatchMetricsEnabled":true,"metricName":"MCPServerWAF","sampledRequestsEnabled":true}}}},"UserPoolId":{"id":"UserPoolId","path":"MCP-Security/UserPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"UserPoolClientId":{"id":"UserPoolClientId","path":"MCP-Security/UserPoolClientId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"UserPoolIdParameter":{"id":"UserPoolIdParameter","path":"MCP-Security/UserPoolIdParameter","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MCP-Security/UserPoolIdParameter/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"description":"The user pool ID for user authentication","name":"/mcp/cognito/user-pool-id-c8adc83b","tags":{"Project":"MCP-Servers-On-AWS"},"type":"String","value":{"Ref":"MCPServerUserPool93568800"}}}}}},"UserPoolClientIdParameter":{"id":"UserPoolClientIdParameter","path":"MCP-Security/UserPoolClientIdParameter","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MCP-Security/UserPoolClientIdParameter/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"description":"The user pool client ID for user authentication","name":"/mcp/cognito/user-pool-client-id-c8adc83b","tags":{"Project":"MCP-Servers-On-AWS"},"type":"String","value":{"Ref":"MCPServerUserPoolmcpuserclient88C9DD5D"}}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"MCP-Security/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"MCP-Security/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"MCP-Security/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.219.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"MCP-Security/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.219.0"}}}},"MCP-CloudFront-WAF":{"id":"MCP-CloudFront-WAF","path":"MCP-CloudFront-WAF","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.219.0"},"children":{"MCPCloudFrontWAF":{"id":"MCPCloudFrontWAF","path":"MCP-CloudFront-WAF/MCPCloudFrontWAF","constructInfo":{"fqn":"aws-cdk-lib.aws_wafv2.CfnWebACL","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::WAFv2::WebACL","aws:cdk:cloudformation:props":{"defaultAction":{"allow":{}},"name":"mcp-cloudfront-waf-c8adc83b","rules":[{"name":"AllowOAuthEndpoints","priority":1,"statement":{"orStatement":{"statements":[{"byteMatchStatement":{"fieldToMatch":{"uriPath":{}},"positionalConstraint":"EXACTLY","searchString":"/register","textTransformations":[{"priority":0,"type":"NONE"}]}},{"byteMatchStatement":{"fieldToMatch":{"uriPath":{}},"positionalConstraint":"EXACTLY","searchString":"/authorize","textTransformations":[{"priority":0,"type":"NONE"}]}},{"byteMatchStatement":{"fieldToMatch":{"uriPath":{}},"positionalConstraint":"EXACTLY","searchString":"/token","textTransformations":[{"priority":0,"type":"NONE"}]}}]}},"action":{"allow":{}},"visibilityConfig":{"cloudWatchMetricsEnabled":true,"metricName":"AllowOAuthEndpoints","sampledRequestsEnabled":true}},{"name":"AWS-AWSManagedRulesCommonRuleSet","priority":10,"statement":{"managedRuleGroupStatement":{"name":"AWSManagedRulesCommonRuleSet","vendorName":"AWS","excludedRules":[{"name":"NoUserAgent_HEADER"},{"name":"UserAgent_BadBots_HEADER"}]}},"overrideAction":{"none":{}},"visibilityConfig":{"cloudWatchMetricsEnabled":true,"metricName":"AWS-AWSManagedRulesCommonRuleSet","sampledRequestsEnabled":true}},{"name":"RateLimitRule","priority":20,"statement":{"rateBasedStatement":{"limit":3000,"aggregateKeyType":"IP"}},"action":{"block":{}},"visibilityConfig":{"cloudWatchMetricsEnabled":true,"metricName":"RateLimitRule","sampledRequestsEnabled":true}}],"scope":"CLOUDFRONT","tags":[{"key":"Project","value":"MCP-Servers-On-AWS"}],"visibilityConfig":{"cloudWatchMetricsEnabled":true,"metricName":"MCPCloudFrontWAF","sampledRequestsEnabled":true}}}},"CloudFrontWafArnParameter":{"id":"CloudFrontWafArnParameter","path":"MCP-CloudFront-WAF/CloudFrontWafArnParameter","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MCP-CloudFront-WAF/CloudFrontWafArnParameter/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"description":"ARN of the CloudFront WAF Web ACL","name":"/mcp/cloudfront-waf-arn-c8adc83b","tags":{"Project":"MCP-Servers-On-AWS"},"type":"String","value":{"Fn::GetAtt":["MCPCloudFrontWAF","Arn"]}}}}}},"CloudFrontWafArn":{"id":"CloudFrontWafArn","path":"MCP-CloudFront-WAF/CloudFrontWafArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"CloudFrontWafArnParamName":{"id":"CloudFrontWafArnParamName","path":"MCP-CloudFront-WAF/CloudFrontWafArnParamName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"CrossRegionWafSyncFunction":{"id":"CrossRegionWafSyncFunction","path":"MCP-CloudFront-WAF/CrossRegionWafSyncFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.219.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"MCP-CloudFront-WAF/CrossRegionWafSyncFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MCP-CloudFront-WAF/CrossRegionWafSyncFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"MCP-CloudFront-WAF/CrossRegionWafSyncFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Project","value":"MCP-Servers-On-AWS"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MCP-CloudFront-WAF/CrossRegionWafSyncFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MCP-CloudFront-WAF/CrossRegionWafSyncFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"ssm:PutParameter","Effect":"Allow","Resource":{"Fn::Join":["",["arn:aws:ssm:us-east-1:",{"Ref":"AWS::AccountId"},":parameter/mcp/cloudfront-waf-*"]]}}],"Version":"2012-10-17"},"policyName":"CrossRegionWafSyncFunctionServiceRoleDefaultPolicy8C3D26D7","roles":[{"Ref":"CrossRegionWafSyncFunctionServiceRole85D2F043"}]}}}}}}},"Resource":{"id":"Resource","path":"MCP-CloudFront-WAF/CrossRegionWafSyncFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"zipFile":"\nconst https = require('https');\nconst url = require('url');\n\n// AWS SDK v3 is available in the Lambda runtime\nconst { SSMClient, PutParameterCommand } = require('@aws-sdk/client-ssm');\n\nexports.handler = async function(event, context) {\n  console.log('Event:', JSON.stringify(event, null, 2));\n  \n  try {\n    // For CREATE and UPDATE events, we need to sync the parameter\n    if (event.RequestType === 'Create' || event.RequestType === 'Update') {\n      const props = event.ResourceProperties;\n      const webAclId = props.WebAclId;\n      const webAclArn = props.WebAclArn;\n      const parameterName = props.ParameterName;\n      const targetRegion = props.TargetRegion;\n      \n      console.log('WebACL ID:', webAclId);\n      console.log('WebACL ARN:', webAclArn);\n      console.log('Parameter Name:', parameterName);\n      console.log('Target Region:', targetRegion);\n      \n      // Update the SSM parameter in the target region\n      const ssmClient = new SSMClient({ region: targetRegion });\n      const putParameterCommand = new PutParameterCommand({\n        Name: parameterName,\n        Value: webAclArn, // Just store the ARN directly\n        Type: 'String',\n        Overwrite: true\n      });\n      \n      await ssmClient.send(putParameterCommand);\n      console.log('Parameter updated successfully in region', targetRegion);\n    }\n    \n    // Send success response back to CloudFormation\n    await sendResponse(event, context, 'SUCCESS', { Message: 'Operation completed successfully' });\n  } catch (error) {\n    console.error('Error:', error);\n    await sendResponse(event, context, 'FAILED', { Error: error.message });\n  }\n};\n\n// Helper function to send response to CloudFormation\nasync function sendResponse(event, context, responseStatus, responseData) {\n  const responseBody = JSON.stringify({\n    Status: responseStatus,\n    Reason: responseStatus === 'FAILED' ? 'See the details in CloudWatch Log Stream: ' + context.logStreamName : 'See the details in CloudWatch Log Stream',\n    PhysicalResourceId: context.logStreamName,\n    StackId: event.StackId,\n    RequestId: event.RequestId,\n    LogicalResourceId: event.LogicalResourceId,\n    NoEcho: false,\n    Data: responseData\n  });\n  \n  console.log('Response body:', responseBody);\n  \n  const parsedUrl = url.parse(event.ResponseURL);\n  \n  const options = {\n    hostname: parsedUrl.hostname,\n    port: 443,\n    path: parsedUrl.path,\n    method: 'PUT',\n    headers: {\n      'Content-Type': '',\n      'Content-Length': responseBody.length\n    }\n  };\n  \n  return new Promise((resolve, reject) => {\n    const request = https.request(options, function(response) {\n      console.log('Status code:', response.statusCode);\n      resolve();\n    });\n    \n    request.on('error', function(error) {\n      console.log('send response error:', error);\n      reject(error);\n    });\n    \n    request.write(responseBody);\n    request.end();\n  });\n}\n        "},"functionName":"cloudfront-waf-sync-c8adc83b","handler":"index.handler","role":{"Fn::GetAtt":["CrossRegionWafSyncFunctionServiceRole85D2F043","Arn"]},"runtime":"nodejs22.x","tags":[{"key":"Project","value":"MCP-Servers-On-AWS"}],"timeout":30}}}}},"CrossRegionWafSync":{"id":"CrossRegionWafSync","path":"MCP-CloudFront-WAF/CrossRegionWafSync","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.219.0","metadata":[]},"children":{"Default":{"id":"Default","path":"MCP-CloudFront-WAF/CrossRegionWafSync/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"CDKMetadata":{"id":"CDKMetadata","path":"MCP-CloudFront-WAF/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"MCP-CloudFront-WAF/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"MCP-CloudFront-WAF/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.219.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"MCP-CloudFront-WAF/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.219.0"}}}},"MCP-Server":{"id":"MCP-Server","path":"MCP-Server","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.219.0"},"children":{"CloudFrontWafArnParam.Parameter":{"id":"CloudFrontWafArnParam.Parameter","path":"MCP-Server/CloudFrontWafArnParam.Parameter","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.219.0"}},"CloudFrontWafArnParam":{"id":"CloudFrontWafArnParam","path":"MCP-Server/CloudFrontWafArnParam","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"UserPoolIdParam.Parameter":{"id":"UserPoolIdParam.Parameter","path":"MCP-Server/UserPoolIdParam.Parameter","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.219.0"}},"UserPoolIdParam":{"id":"UserPoolIdParam","path":"MCP-Server/UserPoolIdParam","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"UserPoolClientIdParam.Parameter":{"id":"UserPoolClientIdParam.Parameter","path":"MCP-Server/UserPoolClientIdParam.Parameter","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.219.0"}},"UserPoolClientIdParam":{"id":"UserPoolClientIdParam","path":"MCP-Server/UserPoolClientIdParam","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"MCPCluster":{"id":"MCPCluster","path":"MCP-Server/MCPCluster","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.Cluster","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MCP-Server/MCPCluster/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnCluster","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Cluster","aws:cdk:cloudformation:props":{"clusterSettings":[{"name":"containerInsights","value":"enhanced"}],"tags":[{"key":"Project","value":"MCP-Servers-On-AWS"}]}}}}},"HttpSecurityGroup-c8adc83b":{"id":"HttpSecurityGroup-c8adc83b","path":"MCP-Server/HttpSecurityGroup-c8adc83b","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MCP-Server/HttpSecurityGroup-c8adc83b/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"HTTP Security group for MCP-Server Stack ALB","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"tags":[{"key":"Project","value":"MCP-Servers-On-AWS"}],"vpcId":{"Fn::ImportValue":"MCP-VPC:ExportsOutputRefMCPVPC68ADF9D1105DCCDE"}}}},"from pl-3b927c52:80":{"id":"from pl-3b927c52:80","path":"MCP-Server/HttpSecurityGroup-c8adc83b/from pl-3b927c52:80","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow HTTP traffic from CloudFront edge locations","fromPort":80,"groupId":{"Fn::GetAtt":["HttpSecurityGroupc8adc83b347C591A","GroupId"]},"ipProtocol":"tcp","sourcePrefixListId":"pl-3b927c52","toPort":80}}}}},"HttpsSecurityGroup-c8adc83b":{"id":"HttpsSecurityGroup-c8adc83b","path":"MCP-Server/HttpsSecurityGroup-c8adc83b","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MCP-Server/HttpsSecurityGroup-c8adc83b/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"HTTPS Security group for MCP-Server Stack ALB","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"tags":[{"key":"Project","value":"MCP-Servers-On-AWS"}],"vpcId":{"Fn::ImportValue":"MCP-VPC:ExportsOutputRefMCPVPC68ADF9D1105DCCDE"}}}},"from pl-3b927c52:443":{"id":"from pl-3b927c52:443","path":"MCP-Server/HttpsSecurityGroup-c8adc83b/from pl-3b927c52:443","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow HTTPS traffic from CloudFront edge locations","fromPort":443,"groupId":{"Fn::GetAtt":["HttpsSecurityGroupc8adc83b85903C13","GroupId"]},"ipProtocol":"tcp","sourcePrefixListId":"pl-3b927c52","toPort":443}}}}},"CloudFrontOriginFacing":{"id":"CloudFrontOriginFacing","path":"MCP-Server/CloudFrontOriginFacing","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"AccessLogsBucket":{"id":"AccessLogsBucket","path":"MCP-Server/AccessLogsBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MCP-Server/AccessLogsBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"lifecycleConfiguration":{"rules":[{"expirationInDays":30,"status":"Enabled"}]},"loggingConfiguration":{"logFilePrefix":"server-access-logs/"},"ownershipControls":{"rules":[{"objectOwnership":"BucketOwnerPreferred"}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"},{"key":"Project","value":"MCP-Servers-On-AWS"}]}}},"Policy":{"id":"Policy","path":"MCP-Server/AccessLogsBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MCP-Server/AccessLogsBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"AccessLogsBucket83982689"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["AccessLogsBucket83982689","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["AccessLogsBucket83982689","Arn"]},"/*"]]}]},{"Action":"s3:PutObject","Condition":{"ArnLike":{"aws:SourceArn":{"Fn::GetAtt":["AccessLogsBucket83982689","Arn"]}},"StringEquals":{"aws:SourceAccount":"661235013910"}},"Effect":"Allow","Principal":{"Service":"logging.s3.amazonaws.com"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["AccessLogsBucket83982689","Arn"]},"/server-access-logs/*"]]}},{"Action":["s3:DeleteObject*","s3:GetBucket*","s3:List*","s3:PutBucketPolicy"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["AccessLogsBucket83982689","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["AccessLogsBucket83982689","Arn"]},"/*"]]}]},{"Action":"s3:PutObject","Effect":"Allow","Principal":{"AWS":"arn:aws:iam::127311923021:root"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["AccessLogsBucket83982689","Arn"]},"/AWSLogs/661235013910/*"]]}},{"Action":"s3:PutObject","Condition":{"StringEquals":{"s3:x-amz-acl":"bucket-owner-full-control"}},"Effect":"Allow","Principal":{"Service":"delivery.logs.amazonaws.com"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["AccessLogsBucket83982689","Arn"]},"/AWSLogs/661235013910/*"]]}},{"Action":"s3:GetBucketAcl","Effect":"Allow","Principal":{"Service":"delivery.logs.amazonaws.com"},"Resource":{"Fn::GetAtt":["AccessLogsBucket83982689","Arn"]}}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"MCP-Server/AccessLogsBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.219.0","metadata":[]},"children":{"Default":{"id":"Default","path":"MCP-Server/AccessLogsBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}}}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"MCP-Server/Custom::S3AutoDeleteObjectsCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.219.0"},"children":{"Staging":{"id":"Staging","path":"MCP-Server/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"Role":{"id":"Role","path":"MCP-Server/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}},"Handler":{"id":"Handler","path":"MCP-Server/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"ApplicationLoadBalancer":{"id":"ApplicationLoadBalancer","path":"MCP-Server/ApplicationLoadBalancer","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MCP-Server/ApplicationLoadBalancer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnLoadBalancer","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::LoadBalancer","aws:cdk:cloudformation:props":{"loadBalancerAttributes":[{"key":"deletion_protection.enabled","value":"false"},{"key":"routing.http2.enabled","value":"true"},{"key":"access_logs.s3.enabled","value":"true"},{"key":"access_logs.s3.bucket","value":{"Ref":"AccessLogsBucket83982689"}},{"key":"access_logs.s3.prefix","value":""}],"scheme":"internet-facing","securityGroups":[{"Fn::GetAtt":["HttpSecurityGroupc8adc83b347C591A","GroupId"]}],"subnets":[{"Fn::ImportValue":"MCP-VPC:ExportsOutputRefMCPVPCpublicSubnet1SubnetAEE1BC0E66B595D5"},{"Fn::ImportValue":"MCP-VPC:ExportsOutputRefMCPVPCpublicSubnet2Subnet6731BC9603C67782"}],"tags":[{"key":"Project","value":"MCP-Servers-On-AWS"}],"type":"application"}}},"HttpListener":{"id":"HttpListener","path":"MCP-Server/ApplicationLoadBalancer/HttpListener","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationListener","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MCP-Server/ApplicationLoadBalancer/HttpListener/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnListener","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::Listener","aws:cdk:cloudformation:props":{"defaultActions":[{"type":"fixed-response","fixedResponseConfig":{"statusCode":"404","contentType":"text/plain","messageBody":"No matching route found"}}],"loadBalancerArn":{"Ref":"ApplicationLoadBalancerFD56DEE1"},"port":80,"protocol":"HTTP"}}},"WeatherNodeJsRouteRule":{"id":"WeatherNodeJsRouteRule","path":"MCP-Server/ApplicationLoadBalancer/HttpListener/WeatherNodeJsRouteRule","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationListenerRule","version":"2.219.0"},"children":{"Resource":{"id":"Resource","path":"MCP-Server/ApplicationLoadBalancer/HttpListener/WeatherNodeJsRouteRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnListenerRule","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::ListenerRule","aws:cdk:cloudformation:props":{"actions":[{"type":"forward","targetGroupArn":{"Ref":"WeatherNodeJsServerWeatherNodeJsTargetGroupDE46D28D"}}],"conditions":[{"field":"path-pattern","pathPatternConfig":{"values":["/weather-nodejs/*"]}}],"listenerArn":{"Ref":"ApplicationLoadBalancerHttpListener075DDBFE"},"priority":21}}}}},"WeatherNodeJsLambdaRouteRule":{"id":"WeatherNodeJsLambdaRouteRule","path":"MCP-Server/ApplicationLoadBalancer/HttpListener/WeatherNodeJsLambdaRouteRule","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationListenerRule","version":"2.219.0"},"children":{"Resource":{"id":"Resource","path":"MCP-Server/ApplicationLoadBalancer/HttpListener/WeatherNodeJsLambdaRouteRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnListenerRule","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::ListenerRule","aws:cdk:cloudformation:props":{"actions":[{"type":"forward","targetGroupArn":{"Ref":"WeatherNodeJsLambdaServerTargetGroup501BC2F2"}}],"conditions":[{"field":"path-pattern","pathPatternConfig":{"values":["/weather-nodejs-lambda/*"]}}],"listenerArn":{"Ref":"ApplicationLoadBalancerHttpListener075DDBFE"},"priority":22}}}}},"OnshapeMCPRouteRule":{"id":"OnshapeMCPRouteRule","path":"MCP-Server/ApplicationLoadBalancer/HttpListener/OnshapeMCPRouteRule","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationListenerRule","version":"2.219.0"},"children":{"Resource":{"id":"Resource","path":"MCP-Server/ApplicationLoadBalancer/HttpListener/OnshapeMCPRouteRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnListenerRule","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::ListenerRule","aws:cdk:cloudformation:props":{"actions":[{"type":"forward","targetGroupArn":{"Ref":"OnshapeMCPServerOnshapeMCPTargetGroup5449C3CB"}}],"conditions":[{"field":"path-pattern","pathPatternConfig":{"values":["/onshape/*"]}}],"listenerArn":{"Ref":"ApplicationLoadBalancerHttpListener075DDBFE"},"priority":23}}}}}}}}},"WeatherNodeJsServer":{"id":"WeatherNodeJsServer","path":"MCP-Server/WeatherNodeJsServer","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"WeatherNodeJsImage":{"id":"WeatherNodeJsImage","path":"MCP-Server/WeatherNodeJsServer/WeatherNodeJsImage","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr_assets.DockerImageAsset","version":"2.219.0"},"children":{"Staging":{"id":"Staging","path":"MCP-Server/WeatherNodeJsServer/WeatherNodeJsImage/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"Repository":{"id":"Repository","path":"MCP-Server/WeatherNodeJsServer/WeatherNodeJsImage/Repository","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.RepositoryBase","version":"2.219.0","metadata":[]}}}},"WeatherNodeJsTask":{"id":"WeatherNodeJsTask","path":"MCP-Server/WeatherNodeJsServer/WeatherNodeJsTask","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateTaskDefinition","version":"2.219.0","metadata":[]},"children":{"TaskRole":{"id":"TaskRole","path":"MCP-Server/WeatherNodeJsServer/WeatherNodeJsTask/TaskRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportTaskRole":{"id":"ImportTaskRole","path":"MCP-Server/WeatherNodeJsServer/WeatherNodeJsTask/TaskRole/ImportTaskRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"MCP-Server/WeatherNodeJsServer/WeatherNodeJsTask/TaskRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"Project","value":"MCP-Servers-On-AWS"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MCP-Server/WeatherNodeJsServer/WeatherNodeJsTask/TaskRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MCP-Server/WeatherNodeJsServer/WeatherNodeJsTask/TaskRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["ssm:GetParameter","ssm:GetParameters"],"Effect":"Allow","Resource":"arn:aws:ssm:us-east-1:661235013910:parameter/mcp/*"}],"Version":"2012-10-17"},"policyName":"WeatherNodeJsServerWeatherNodeJsTaskTaskRoleDefaultPolicy9E25B518","roles":[{"Ref":"WeatherNodeJsServerWeatherNodeJsTaskTaskRoleE1943BDC"}]}}}}}}},"Resource":{"id":"Resource","path":"MCP-Server/WeatherNodeJsServer/WeatherNodeJsTask/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"essential":true,"image":{"Fn::Sub":"661235013910.dkr.ecr.us-east-1.${AWS::URLSuffix}/cdk-hnb659fds-container-assets-661235013910-us-east-1:7d4d4458c07f239d360686ee39320c2a4e41c0f89eac8986b62dbb86e598d455"},"name":"WeatherNodeJsContainer","portMappings":[{"containerPort":8080,"hostPort":8080,"protocol":"tcp"}],"logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":{"Ref":"WeatherNodeJsServerWeatherNodeJsLogsAF0ADC45"},"awslogs-stream-prefix":"mcp-weathernodejs","awslogs-region":"us-east-1"}},"environment":[{"name":"PORT","value":"8080"},{"name":"BASE_PATH","value":"/weather-nodejs"},{"name":"AWS_REGION","value":"us-east-1"},{"name":"COGNITO_USER_POOL_ID","value":{"Ref":"UserPoolIdParamParameter"}},{"name":"COGNITO_CLIENT_ID","value":{"Ref":"UserPoolClientIdParamParameter"}},{"name":"MCP_SERVER_BASE_URL_PARAMETER_NAME","value":"/mcp/https-url"}],"healthCheck":{"command":["CMD-SHELL","curl -f http://localhost:8080/weather-nodejs/ || exit 1"],"interval":30,"retries":3,"startPeriod":60,"timeout":5}}],"cpu":"256","executionRoleArn":{"Fn::GetAtt":["WeatherNodeJsServerWeatherNodeJsTaskExecutionRole3679ED78","Arn"]},"family":"MCPServerWeatherNodeJsServerWeatherNodeJsTaskA4AB8A88","memory":"512","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"tags":[{"key":"Project","value":"MCP-Servers-On-AWS"}],"taskRoleArn":{"Fn::GetAtt":["WeatherNodeJsServerWeatherNodeJsTaskTaskRoleE1943BDC","Arn"]}}}},"WeatherNodeJsContainer":{"id":"WeatherNodeJsContainer","path":"MCP-Server/WeatherNodeJsServer/WeatherNodeJsTask/WeatherNodeJsContainer","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"2.219.0"}},"ExecutionRole":{"id":"ExecutionRole","path":"MCP-Server/WeatherNodeJsServer/WeatherNodeJsTask/ExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportExecutionRole":{"id":"ImportExecutionRole","path":"MCP-Server/WeatherNodeJsServer/WeatherNodeJsTask/ExecutionRole/ImportExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"MCP-Server/WeatherNodeJsServer/WeatherNodeJsTask/ExecutionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"Project","value":"MCP-Servers-On-AWS"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MCP-Server/WeatherNodeJsServer/WeatherNodeJsTask/ExecutionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MCP-Server/WeatherNodeJsServer/WeatherNodeJsTask/ExecutionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["ecr:BatchCheckLayerAvailability","ecr:BatchGetImage","ecr:GetDownloadUrlForLayer"],"Effect":"Allow","Resource":"arn:aws:ecr:us-east-1:661235013910:repository/cdk-hnb659fds-container-assets-661235013910-us-east-1"},{"Action":"ecr:GetAuthorizationToken","Effect":"Allow","Resource":"*"},{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["WeatherNodeJsServerWeatherNodeJsLogsAF0ADC45","Arn"]}}],"Version":"2012-10-17"},"policyName":"WeatherNodeJsServerWeatherNodeJsTaskExecutionRoleDefaultPolicy8BC37CC6","roles":[{"Ref":"WeatherNodeJsServerWeatherNodeJsTaskExecutionRole3679ED78"}]}}}}}}}}},"WeatherNodeJsLogs":{"id":"WeatherNodeJsLogs","path":"MCP-Server/WeatherNodeJsServer/WeatherNodeJsLogs","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MCP-Server/WeatherNodeJsServer/WeatherNodeJsLogs/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":"/ecs/mcp-weathernodejs-server","retentionInDays":7,"tags":[{"key":"Project","value":"MCP-Servers-On-AWS"}]}}}}},"WeatherNodeJsServiceSecurityGroup":{"id":"WeatherNodeJsServiceSecurityGroup","path":"MCP-Server/WeatherNodeJsServer/WeatherNodeJsServiceSecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MCP-Server/WeatherNodeJsServer/WeatherNodeJsServiceSecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Security group for WeatherNodeJs MCP server service","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"securityGroupIngress":[{"sourceSecurityGroupId":{"Fn::GetAtt":["HttpSecurityGroupc8adc83b347C591A","GroupId"]},"ipProtocol":"tcp","fromPort":8080,"toPort":8080,"description":"Allow traffic from WeatherNodeJs ALB to container"}],"tags":[{"key":"Project","value":"MCP-Servers-On-AWS"}],"vpcId":{"Fn::ImportValue":"MCP-VPC:ExportsOutputRefMCPVPC68ADF9D1105DCCDE"}}}},"from MCPServerHttpSecurityGroupc8adc83b6A0D2EA5:8080":{"id":"from MCPServerHttpSecurityGroupc8adc83b6A0D2EA5:8080","path":"MCP-Server/WeatherNodeJsServer/WeatherNodeJsServiceSecurityGroup/from MCPServerHttpSecurityGroupc8adc83b6A0D2EA5:8080","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","fromPort":8080,"groupId":{"Fn::GetAtt":["WeatherNodeJsServerWeatherNodeJsServiceSecurityGroupDA226A0D","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["HttpSecurityGroupc8adc83b347C591A","GroupId"]},"toPort":8080}}}}},"WeatherNodeJsService":{"id":"WeatherNodeJsService","path":"MCP-Server/WeatherNodeJsServer/WeatherNodeJsService","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateService","version":"2.219.0","metadata":[]},"children":{"Service":{"id":"Service","path":"MCP-Server/WeatherNodeJsServer/WeatherNodeJsService/Service","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnService","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Service","aws:cdk:cloudformation:props":{"cluster":{"Ref":"MCPCluster399F09A9"},"deploymentConfiguration":{"maximumPercent":100,"minimumHealthyPercent":50},"desiredCount":2,"enableEcsManagedTags":false,"healthCheckGracePeriodSeconds":60,"launchType":"FARGATE","loadBalancers":[{"targetGroupArn":{"Ref":"WeatherNodeJsServerWeatherNodeJsTargetGroupDE46D28D"},"containerName":"WeatherNodeJsContainer","containerPort":8080}],"networkConfiguration":{"awsvpcConfiguration":{"assignPublicIp":"DISABLED","subnets":[{"Fn::ImportValue":"MCP-VPC:ExportsOutputRefMCPVPCprivateSubnet1Subnet9FF5B95861818854"},{"Fn::ImportValue":"MCP-VPC:ExportsOutputRefMCPVPCprivateSubnet2Subnet5E0860C9E75204C0"}],"securityGroups":[{"Fn::GetAtt":["WeatherNodeJsServerWeatherNodeJsServiceSecurityGroupDA226A0D","GroupId"]}]}},"tags":[{"key":"Project","value":"MCP-Servers-On-AWS"}],"taskDefinition":{"Ref":"WeatherNodeJsServerWeatherNodeJsTaskCFF24FBB"}}}},"ScalingRole":{"id":"ScalingRole","path":"MCP-Server/WeatherNodeJsServer/WeatherNodeJsService/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"TaskCount":{"id":"TaskCount","path":"MCP-Server/WeatherNodeJsServer/WeatherNodeJsService/TaskCount","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ScalableTaskCount","version":"2.219.0"},"children":{"Target":{"id":"Target","path":"MCP-Server/WeatherNodeJsServer/WeatherNodeJsService/TaskCount/Target","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.ScalableTarget","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MCP-Server/WeatherNodeJsServer/WeatherNodeJsService/TaskCount/Target/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.CfnScalableTarget","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApplicationAutoScaling::ScalableTarget","aws:cdk:cloudformation:props":{"maxCapacity":5,"minCapacity":1,"resourceId":{"Fn::Join":["",["service/",{"Ref":"MCPCluster399F09A9"},"/",{"Fn::GetAtt":["WeatherNodeJsServerWeatherNodeJsService3FD54841","Name"]}]]},"roleArn":"arn:aws:iam::661235013910:role/aws-service-role/ecs.application-autoscaling.amazonaws.com/AWSServiceRoleForApplicationAutoScaling_ECSService","scalableDimension":"ecs:service:DesiredCount","serviceNamespace":"ecs"}}},"WeatherNodeJsCpuScaling":{"id":"WeatherNodeJsCpuScaling","path":"MCP-Server/WeatherNodeJsServer/WeatherNodeJsService/TaskCount/Target/WeatherNodeJsCpuScaling","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.TargetTrackingScalingPolicy","version":"2.219.0"},"children":{"Resource":{"id":"Resource","path":"MCP-Server/WeatherNodeJsServer/WeatherNodeJsService/TaskCount/Target/WeatherNodeJsCpuScaling/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.CfnScalingPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApplicationAutoScaling::ScalingPolicy","aws:cdk:cloudformation:props":{"policyName":"MCPServerWeatherNodeJsServerWeatherNodeJsServiceTaskCountTargetWeatherNodeJsCpuScalingB91D3AC8","policyType":"TargetTrackingScaling","scalingTargetId":{"Ref":"WeatherNodeJsServerWeatherNodeJsServiceTaskCountTarget3F234DFD"},"targetTrackingScalingPolicyConfiguration":{"predefinedMetricSpecification":{"predefinedMetricType":"ECSServiceAverageCPUUtilization"},"scaleInCooldown":60,"scaleOutCooldown":60,"targetValue":70}}}}}}}}}}}},"WeatherNodeJsTargetGroup":{"id":"WeatherNodeJsTargetGroup","path":"MCP-Server/WeatherNodeJsServer/WeatherNodeJsTargetGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationTargetGroup","version":"2.219.0"},"children":{"Resource":{"id":"Resource","path":"MCP-Server/WeatherNodeJsServer/WeatherNodeJsTargetGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnTargetGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::TargetGroup","aws:cdk:cloudformation:props":{"healthCheckIntervalSeconds":30,"healthCheckPath":"/weather-nodejs/","healthCheckPort":"8080","healthCheckTimeoutSeconds":5,"healthyThresholdCount":3,"name":"weathernodejsserver-weathernodej","port":8080,"protocol":"HTTP","tags":[{"key":"Project","value":"MCP-Servers-On-AWS"}],"targetGroupAttributes":[{"key":"stickiness.enabled","value":"false"}],"targetType":"ip","unhealthyThresholdCount":3,"vpcId":{"Fn::ImportValue":"MCP-VPC:ExportsOutputRefMCPVPC68ADF9D1105DCCDE"}}}}}}}},"OnshapeMCPServer":{"id":"OnshapeMCPServer","path":"MCP-Server/OnshapeMCPServer","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"OnshapeMCPImage":{"id":"OnshapeMCPImage","path":"MCP-Server/OnshapeMCPServer/OnshapeMCPImage","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr_assets.DockerImageAsset","version":"2.219.0"},"children":{"Staging":{"id":"Staging","path":"MCP-Server/OnshapeMCPServer/OnshapeMCPImage/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"Repository":{"id":"Repository","path":"MCP-Server/OnshapeMCPServer/OnshapeMCPImage/Repository","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.RepositoryBase","version":"2.219.0","metadata":[]}}}},"OnshapeMCPTask":{"id":"OnshapeMCPTask","path":"MCP-Server/OnshapeMCPServer/OnshapeMCPTask","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateTaskDefinition","version":"2.219.0","metadata":[]},"children":{"TaskRole":{"id":"TaskRole","path":"MCP-Server/OnshapeMCPServer/OnshapeMCPTask/TaskRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportTaskRole":{"id":"ImportTaskRole","path":"MCP-Server/OnshapeMCPServer/OnshapeMCPTask/TaskRole/ImportTaskRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"MCP-Server/OnshapeMCPServer/OnshapeMCPTask/TaskRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"Project","value":"MCP-Servers-On-AWS"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MCP-Server/OnshapeMCPServer/OnshapeMCPTask/TaskRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MCP-Server/OnshapeMCPServer/OnshapeMCPTask/TaskRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["ssm:GetParameter","ssm:GetParameters"],"Effect":"Allow","Resource":"arn:aws:ssm:us-east-1:661235013910:parameter/mcp/*"}],"Version":"2012-10-17"},"policyName":"OnshapeMCPServerOnshapeMCPTaskTaskRoleDefaultPolicy80957709","roles":[{"Ref":"OnshapeMCPServerOnshapeMCPTaskTaskRoleF99506A0"}]}}}}}}},"Resource":{"id":"Resource","path":"MCP-Server/OnshapeMCPServer/OnshapeMCPTask/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"essential":true,"image":{"Fn::Sub":"661235013910.dkr.ecr.us-east-1.${AWS::URLSuffix}/cdk-hnb659fds-container-assets-661235013910-us-east-1:48010a6860345614f0c093d1627e1adc0699b903f0bd27b6e34576fa3d6ab110"},"name":"OnshapeMCPContainer","portMappings":[{"containerPort":8080,"hostPort":8080,"protocol":"tcp"}],"logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":{"Ref":"OnshapeMCPServerOnshapeMCPLogs66370C91"},"awslogs-stream-prefix":"mcp-onshapemcp","awslogs-region":"us-east-1"}},"environment":[{"name":"PORT","value":"8080"},{"name":"BASE_PATH","value":"/onshape"},{"name":"AWS_REGION","value":"us-east-1"},{"name":"COGNITO_USER_POOL_ID","value":{"Ref":"UserPoolIdParamParameter"}},{"name":"COGNITO_CLIENT_ID","value":{"Ref":"UserPoolClientIdParamParameter"}},{"name":"ONSHAPE_ACCESS_KEY","value":"on_MbbD7rBrxSC06uYCPO3nL"},{"name":"ONSHAPE_SECRET_KEY","value":"LHS5Xe942iNbWzPUcT435ZLvK8CcEeuj7JZWlVBMcO1ogcTM"},{"name":"ONSHAPE_API_URL","value":"https://cad.onshape.com/api/v12"},{"name":"MCP_SERVER_BASE_URL_PARAMETER_NAME","value":"/mcp/https-url"}],"healthCheck":{"command":["CMD-SHELL","curl -f http://localhost:8080/onshape/ || exit 1"],"interval":30,"retries":3,"startPeriod":60,"timeout":5}}],"cpu":"256","executionRoleArn":{"Fn::GetAtt":["OnshapeMCPServerOnshapeMCPTaskExecutionRoleD12FC66D","Arn"]},"family":"MCPServerOnshapeMCPServerOnshapeMCPTaskCEE71D0D","memory":"512","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"tags":[{"key":"Project","value":"MCP-Servers-On-AWS"}],"taskRoleArn":{"Fn::GetAtt":["OnshapeMCPServerOnshapeMCPTaskTaskRoleF99506A0","Arn"]}}}},"OnshapeMCPContainer":{"id":"OnshapeMCPContainer","path":"MCP-Server/OnshapeMCPServer/OnshapeMCPTask/OnshapeMCPContainer","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"2.219.0"}},"ExecutionRole":{"id":"ExecutionRole","path":"MCP-Server/OnshapeMCPServer/OnshapeMCPTask/ExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportExecutionRole":{"id":"ImportExecutionRole","path":"MCP-Server/OnshapeMCPServer/OnshapeMCPTask/ExecutionRole/ImportExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"MCP-Server/OnshapeMCPServer/OnshapeMCPTask/ExecutionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"Project","value":"MCP-Servers-On-AWS"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MCP-Server/OnshapeMCPServer/OnshapeMCPTask/ExecutionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MCP-Server/OnshapeMCPServer/OnshapeMCPTask/ExecutionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["ecr:BatchCheckLayerAvailability","ecr:BatchGetImage","ecr:GetDownloadUrlForLayer"],"Effect":"Allow","Resource":"arn:aws:ecr:us-east-1:661235013910:repository/cdk-hnb659fds-container-assets-661235013910-us-east-1"},{"Action":"ecr:GetAuthorizationToken","Effect":"Allow","Resource":"*"},{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["OnshapeMCPServerOnshapeMCPLogs66370C91","Arn"]}}],"Version":"2012-10-17"},"policyName":"OnshapeMCPServerOnshapeMCPTaskExecutionRoleDefaultPolicyCC3C6FA2","roles":[{"Ref":"OnshapeMCPServerOnshapeMCPTaskExecutionRoleD12FC66D"}]}}}}}}}}},"OnshapeMCPLogs":{"id":"OnshapeMCPLogs","path":"MCP-Server/OnshapeMCPServer/OnshapeMCPLogs","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MCP-Server/OnshapeMCPServer/OnshapeMCPLogs/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":"/ecs/mcp-onshapemcp-server","retentionInDays":7,"tags":[{"key":"Project","value":"MCP-Servers-On-AWS"}]}}}}},"OnshapeMCPServiceSecurityGroup":{"id":"OnshapeMCPServiceSecurityGroup","path":"MCP-Server/OnshapeMCPServer/OnshapeMCPServiceSecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MCP-Server/OnshapeMCPServer/OnshapeMCPServiceSecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Security group for OnshapeMCP MCP server service","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"securityGroupIngress":[{"sourceSecurityGroupId":{"Fn::GetAtt":["HttpSecurityGroupc8adc83b347C591A","GroupId"]},"ipProtocol":"tcp","fromPort":8080,"toPort":8080,"description":"Allow traffic from OnshapeMCP ALB to container"}],"tags":[{"key":"Project","value":"MCP-Servers-On-AWS"}],"vpcId":{"Fn::ImportValue":"MCP-VPC:ExportsOutputRefMCPVPC68ADF9D1105DCCDE"}}}},"from MCPServerHttpSecurityGroupc8adc83b6A0D2EA5:8080":{"id":"from MCPServerHttpSecurityGroupc8adc83b6A0D2EA5:8080","path":"MCP-Server/OnshapeMCPServer/OnshapeMCPServiceSecurityGroup/from MCPServerHttpSecurityGroupc8adc83b6A0D2EA5:8080","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","fromPort":8080,"groupId":{"Fn::GetAtt":["OnshapeMCPServerOnshapeMCPServiceSecurityGroup80D86EE6","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["HttpSecurityGroupc8adc83b347C591A","GroupId"]},"toPort":8080}}}}},"OnshapeMCPService":{"id":"OnshapeMCPService","path":"MCP-Server/OnshapeMCPServer/OnshapeMCPService","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateService","version":"2.219.0","metadata":[]},"children":{"Service":{"id":"Service","path":"MCP-Server/OnshapeMCPServer/OnshapeMCPService/Service","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnService","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Service","aws:cdk:cloudformation:props":{"cluster":{"Ref":"MCPCluster399F09A9"},"deploymentConfiguration":{"maximumPercent":100,"minimumHealthyPercent":50},"desiredCount":2,"enableEcsManagedTags":false,"healthCheckGracePeriodSeconds":60,"launchType":"FARGATE","loadBalancers":[{"targetGroupArn":{"Ref":"OnshapeMCPServerOnshapeMCPTargetGroup5449C3CB"},"containerName":"OnshapeMCPContainer","containerPort":8080}],"networkConfiguration":{"awsvpcConfiguration":{"assignPublicIp":"DISABLED","subnets":[{"Fn::ImportValue":"MCP-VPC:ExportsOutputRefMCPVPCprivateSubnet1Subnet9FF5B95861818854"},{"Fn::ImportValue":"MCP-VPC:ExportsOutputRefMCPVPCprivateSubnet2Subnet5E0860C9E75204C0"}],"securityGroups":[{"Fn::GetAtt":["OnshapeMCPServerOnshapeMCPServiceSecurityGroup80D86EE6","GroupId"]}]}},"tags":[{"key":"Project","value":"MCP-Servers-On-AWS"}],"taskDefinition":{"Ref":"OnshapeMCPServerOnshapeMCPTaskDC9CAB19"}}}},"ScalingRole":{"id":"ScalingRole","path":"MCP-Server/OnshapeMCPServer/OnshapeMCPService/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"TaskCount":{"id":"TaskCount","path":"MCP-Server/OnshapeMCPServer/OnshapeMCPService/TaskCount","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ScalableTaskCount","version":"2.219.0"},"children":{"Target":{"id":"Target","path":"MCP-Server/OnshapeMCPServer/OnshapeMCPService/TaskCount/Target","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.ScalableTarget","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MCP-Server/OnshapeMCPServer/OnshapeMCPService/TaskCount/Target/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.CfnScalableTarget","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApplicationAutoScaling::ScalableTarget","aws:cdk:cloudformation:props":{"maxCapacity":5,"minCapacity":1,"resourceId":{"Fn::Join":["",["service/",{"Ref":"MCPCluster399F09A9"},"/",{"Fn::GetAtt":["OnshapeMCPServerOnshapeMCPServiceE5702A3A","Name"]}]]},"roleArn":"arn:aws:iam::661235013910:role/aws-service-role/ecs.application-autoscaling.amazonaws.com/AWSServiceRoleForApplicationAutoScaling_ECSService","scalableDimension":"ecs:service:DesiredCount","serviceNamespace":"ecs"}}},"OnshapeMCPCpuScaling":{"id":"OnshapeMCPCpuScaling","path":"MCP-Server/OnshapeMCPServer/OnshapeMCPService/TaskCount/Target/OnshapeMCPCpuScaling","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.TargetTrackingScalingPolicy","version":"2.219.0"},"children":{"Resource":{"id":"Resource","path":"MCP-Server/OnshapeMCPServer/OnshapeMCPService/TaskCount/Target/OnshapeMCPCpuScaling/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.CfnScalingPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApplicationAutoScaling::ScalingPolicy","aws:cdk:cloudformation:props":{"policyName":"MCPServerOnshapeMCPServerOnshapeMCPServiceTaskCountTargetOnshapeMCPCpuScaling86C999BB","policyType":"TargetTrackingScaling","scalingTargetId":{"Ref":"OnshapeMCPServerOnshapeMCPServiceTaskCountTargetC54E72FC"},"targetTrackingScalingPolicyConfiguration":{"predefinedMetricSpecification":{"predefinedMetricType":"ECSServiceAverageCPUUtilization"},"scaleInCooldown":60,"scaleOutCooldown":60,"targetValue":70}}}}}}}}}}}},"OnshapeMCPTargetGroup":{"id":"OnshapeMCPTargetGroup","path":"MCP-Server/OnshapeMCPServer/OnshapeMCPTargetGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationTargetGroup","version":"2.219.0"},"children":{"Resource":{"id":"Resource","path":"MCP-Server/OnshapeMCPServer/OnshapeMCPTargetGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnTargetGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::TargetGroup","aws:cdk:cloudformation:props":{"healthCheckIntervalSeconds":30,"healthCheckPath":"/onshape/","healthCheckPort":"8080","healthCheckTimeoutSeconds":5,"healthyThresholdCount":3,"name":"onshapemcpserver-onshapemcp-tg","port":8080,"protocol":"HTTP","tags":[{"key":"Project","value":"MCP-Servers-On-AWS"}],"targetGroupAttributes":[{"key":"stickiness.enabled","value":"false"}],"targetType":"ip","unhealthyThresholdCount":3,"vpcId":{"Fn::ImportValue":"MCP-VPC:ExportsOutputRefMCPVPC68ADF9D1105DCCDE"}}}}}}}},"WeatherNodeJsLambda":{"id":"WeatherNodeJsLambda","path":"MCP-Server/WeatherNodeJsLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.DockerImageFunction","version":"2.219.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"MCP-Server/WeatherNodeJsLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MCP-Server/WeatherNodeJsLambda/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"MCP-Server/WeatherNodeJsLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"]]}],"tags":[{"key":"Project","value":"MCP-Servers-On-AWS"}]}}}}},"AssetImage":{"id":"AssetImage","path":"MCP-Server/WeatherNodeJsLambda/AssetImage","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr_assets.DockerImageAsset","version":"2.219.0"},"children":{"Staging":{"id":"Staging","path":"MCP-Server/WeatherNodeJsLambda/AssetImage/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"Repository":{"id":"Repository","path":"MCP-Server/WeatherNodeJsLambda/AssetImage/Repository","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.RepositoryBase","version":"2.219.0","metadata":[]}}}},"SecurityGroup":{"id":"SecurityGroup","path":"MCP-Server/WeatherNodeJsLambda/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MCP-Server/WeatherNodeJsLambda/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Automatic security group for Lambda Function MCPServerWeatherNodeJsLambdaE263BC9D","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"tags":[{"key":"Project","value":"MCP-Servers-On-AWS"}],"vpcId":{"Fn::ImportValue":"MCP-VPC:ExportsOutputRefMCPVPC68ADF9D1105DCCDE"}}}}}},"Resource":{"id":"Resource","path":"MCP-Server/WeatherNodeJsLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"imageUri":{"Fn::Sub":"661235013910.dkr.ecr.us-east-1.${AWS::URLSuffix}/cdk-hnb659fds-container-assets-661235013910-us-east-1:9b839136648fdf80b3edbf74e50b18aebca048190410b944c5a3571298e07f40"}},"environment":{"variables":{"COGNITO_USER_POOL_ID":{"Ref":"UserPoolIdParamParameter"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClientIdParamParameter"},"PORT":"8080"}},"memorySize":1024,"packageType":"Image","role":{"Fn::GetAtt":["WeatherNodeJsLambdaServiceRoleC654D64C","Arn"]},"tags":[{"key":"Project","value":"MCP-Servers-On-AWS"}],"timeout":60,"vpcConfig":{"subnetIds":[{"Fn::ImportValue":"MCP-VPC:ExportsOutputRefMCPVPCprivateSubnet1Subnet9FF5B95861818854"},{"Fn::ImportValue":"MCP-VPC:ExportsOutputRefMCPVPCprivateSubnet2Subnet5E0860C9E75204C0"}],"securityGroupIds":[{"Fn::GetAtt":["WeatherNodeJsLambdaSecurityGroupE3502688","GroupId"]}]}}}},"Invoke2UTWxhlfyqbT5FTn--5jvgbLgj+FfJwzswGk55DU1H--Y=":{"id":"Invoke2UTWxhlfyqbT5FTn--5jvgbLgj+FfJwzswGk55DU1H--Y=","path":"MCP-Server/WeatherNodeJsLambda/Invoke2UTWxhlfyqbT5FTn--5jvgbLgj+FfJwzswGk55DU1H--Y=","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["WeatherNodeJsLambda509B59F4","Arn"]},"principal":"elasticloadbalancing.amazonaws.com"}}},"AllowALBInvoke":{"id":"AllowALBInvoke","path":"MCP-Server/WeatherNodeJsLambda/AllowALBInvoke","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["WeatherNodeJsLambda509B59F4","Arn"]},"principal":"elasticloadbalancing.amazonaws.com","sourceArn":{"Ref":"WeatherNodeJsLambdaServerTargetGroup501BC2F2"}}}}}},"WeatherNodeJsLambdaServer":{"id":"WeatherNodeJsLambdaServer","path":"MCP-Server/WeatherNodeJsLambdaServer","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"TargetGroup":{"id":"TargetGroup","path":"MCP-Server/WeatherNodeJsLambdaServer/TargetGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationTargetGroup","version":"2.219.0"},"children":{"Resource":{"id":"Resource","path":"MCP-Server/WeatherNodeJsLambdaServer/TargetGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnTargetGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::TargetGroup","aws:cdk:cloudformation:props":{"tags":[{"key":"Project","value":"MCP-Servers-On-AWS"}],"targets":[{"id":{"Fn::GetAtt":["WeatherNodeJsLambda509B59F4","Arn"]}}],"targetType":"lambda"}}}}}}},"MCPServerStackDistribution":{"id":"MCPServerStackDistribution","path":"MCP-Server/MCPServerStackDistribution","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.219.0","metadata":[]},"children":{"Origin1":{"id":"Origin1","path":"MCP-Server/MCPServerStackDistribution/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Resource":{"id":"Resource","path":"MCP-Server/MCPServerStackDistribution/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::GetAtt":["ApplicationLoadBalancerFD56DEE1","DNSName"]},"id":"MCPServerMCPServerStackDistributionOrigin174F624B6","connectionAttempts":3,"connectionTimeout":10,"customOriginConfig":{"originSslProtocols":["TLSv1.2"],"originProtocolPolicy":"http-only","httpPort":80,"httpsPort":443,"originReadTimeout":30,"originKeepaliveTimeout":5}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"MCPServerMCPServerStackDistributionOrigin174F624B6","allowedMethods":["GET","HEAD","OPTIONS","PUT","PATCH","POST","DELETE"],"cachePolicyId":"4135ea2d-6df8-44a3-9df3-4b5a84be39ad","compress":true,"originRequestPolicyId":"216adef6-5c7f-47e4-b989-5492eafa07d3","viewerProtocolPolicy":"redirect-to-https"},"comment":"CloudFront distribution for MCP-Server stack","httpVersion":"http2and3","ipv6Enabled":true,"logging":{"bucket":{"Fn::GetAtt":["AccessLogsBucket83982689","RegionalDomainName"]},"prefix":"cloudfront-logs/"},"priceClass":"PriceClass_100","restrictions":{"geoRestriction":{"restrictionType":"whitelist","locations":["US","CA","MX","GB","DE","FR","IE","NL","SE","NO","FI","DK","ES","IT","CH","AT","BE","PL","JP","KR","SG","AU","NZ","HK","TW","IN","ID","MY","TH","VN","BR","AR","CL","CO","PE","AE","BH","IL","SA"]}},"webAclId":{"Ref":"CloudFrontWafArnParamParameter"}},"tags":[{"key":"Project","value":"MCP-Servers-On-AWS"}]}}}}},"CloudFrontDistributions":{"id":"CloudFrontDistributions","path":"MCP-Server/CloudFrontDistributions","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"MCP-Server/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"MCP-Server/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"MCP-Server/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.219.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"MCP-Server/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.219.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}